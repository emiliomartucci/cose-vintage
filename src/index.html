<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Cose Vintage - Abbigliamento vintage premium selezionato con cura. Pezzi unici dai migliori mercatini parigini, ogni capo racconta una storia.">

  <title>Cose Vintage | Abbigliamento Vintage Premium</title>

  <!-- Canonical -->
  <link rel="canonical" href="https://cosevintage.com/">

  <!-- Open Graph -->
  <meta property="og:title" content="Cose Vintage | Abbigliamento Vintage Premium">
  <meta property="og:description" content="Abbigliamento vintage premium selezionato con cura. Pezzi unici dai migliori mercatini parigini.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://cosevintage.com/">
  <meta property="og:image" content="https://cosevintage.com/assets/og-image.jpg">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;1,400&family=Lora:ital,wght@0,400;0,500;1,400&family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400&family=Source+Sans+3:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css">


  <!-- Schema.org -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ClothingStore",
    "name": "Cose Vintage",
    "description": "Abbigliamento vintage premium selezionato con cura",
    "url": "https://cosevintage.com",
    "priceRange": "$$"
  }
  </script>

  <style>
    /* Page-specific styles */
    .categories-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--space-6);
    }

    @media (max-width: 767px) {
      .categories-grid {
        grid-template-columns: 1fr;
      }
    }

    .category-card {
      position: relative;
      aspect-ratio: 4/5;
      overflow: hidden;
      border-radius: var(--radius-lg);
      background: var(--color-parchment);
    }

    .category-card__image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform var(--transition-slow);
    }

    .category-card:hover .category-card__image {
      transform: scale(1.08);
    }

    .category-card__overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(61, 53, 46, 0.7) 0%, transparent 60%);
      display: flex;
      align-items: flex-end;
      padding: var(--space-6);
    }

    .category-card__title {
      font-family: var(--font-display);
      font-size: var(--text-3xl);
      color: var(--color-cream);
      margin: 0;
    }

    .category-card__count {
      font-family: var(--font-ui);
      font-size: var(--text-sm);
      color: var(--color-cream);
      opacity: 0.8;
      margin-top: var(--space-1);
    }

    /* Story section */
    .story-section {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-12);
      align-items: center;
    }

    @media (max-width: 767px) {
      .story-section {
        grid-template-columns: 1fr;
      }
    }

    .story-image {
      position: relative;
    }

    .story-image img {
      width: 100%;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-vintage);
    }

    .story-image::before {
      content: '';
      position: absolute;
      top: var(--space-4);
      left: var(--space-4);
      right: calc(var(--space-4) * -1);
      bottom: calc(var(--space-4) * -1);
      border: 2px solid var(--color-gold-light);
      border-radius: var(--radius-lg);
      z-index: -1;
    }

    /* Newsletter section */
    .newsletter-section {
      background: var(--color-parchment);
      border-radius: var(--radius-xl);
      padding: var(--space-12);
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .newsletter-section::before,
    .newsletter-section::after {
      content: '';
      position: absolute;
      width: 60px;
      height: 60px;
      border: 1px solid var(--color-gold-light);
    }

    .newsletter-section::before {
      top: var(--space-6);
      left: var(--space-6);
      border-right: none;
      border-bottom: none;
    }

    .newsletter-section::after {
      bottom: var(--space-6);
      right: var(--space-6);
      border-left: none;
      border-top: none;
    }

    /* Mobile nav styles */
    @media (max-width: 767px) {
      .header__nav.is-open {
        display: flex;
        flex-direction: column;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--color-cream);
        padding: var(--space-6);
        border-bottom: var(--border-thin);
        box-shadow: var(--shadow-lg);
      }

      .header__nav.is-open .header__nav-link {
        padding: var(--space-3) 0;
        border-bottom: var(--border-thin);
      }
    }

    /* Header scroll styles */
    .header--scrolled {
      box-shadow: var(--shadow-md);
    }

    .header--hidden {
      transform: translateY(-100%);
    }

    .header {
      transition: transform var(--transition-base), box-shadow var(--transition-base);
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    <div class="container">
      <div class="header__inner">
        <a href="/" class="header__logo">Cose <span>Vintage</span></a>

        <nav class="header__nav" id="main-nav">
          <a href="/shop.html" class="header__nav-link">Shop</a>
          <a href="/shop.html?filter=nuovi" class="header__nav-link">Nuovi Arrivi</a>
          <a href="/chi-siamo.html" class="header__nav-link">Chi Siamo</a>
          <a href="/contatti.html" class="header__nav-link">Contatti</a>
        </nav>

        <div class="header__actions">
          <button class="btn btn-icon btn-ghost snipcart-customer-signin" aria-label="Account">
            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
          </button>
          <button class="btn btn-icon btn-ghost header__cart snipcart-checkout" aria-label="Carrello">
            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
              <path d="M3 6h18"/>
              <path d="M16 10a4 4 0 0 1-8 0"/>
            </svg>
            <span class="header__cart-count snipcart-items-count" style="display: none;">0</span>
          </button>
          <button class="header__menu-toggle" aria-label="Menu" aria-expanded="false" aria-controls="main-nav">
            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path d="M3 12h18M3 6h18M3 18h18"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </header>

  <main>
    <!-- HERO - Layered Parisian Vintage -->
    <section class="hero">
      <!-- Atmospheric gradient background -->
      <div class="hero__sky"></div>

      <!-- Layered fabric waves -->
      <div class="hero__wave hero__wave--back">
        <svg viewBox="0 0 1440 400" preserveAspectRatio="none">
          <path d="M0,400 L0,280 C200,220 450,260 700,200 C950,140 1150,180 1350,140 C1400,130 1420,150 1440,120 L1440,400 Z" fill="rgba(61,53,46,0.15)"/>
        </svg>
      </div>
      <div class="hero__wave hero__wave--mid">
        <svg viewBox="0 0 1440 320" preserveAspectRatio="none">
          <path d="M0,320 L0,200 C180,140 400,180 650,120 C900,60 1100,100 1300,70 C1380,50 1420,80 1440,50 L1440,320 Z" fill="rgba(61,53,46,0.4)"/>
        </svg>
      </div>
      <div class="hero__wave hero__wave--front">
        <svg viewBox="0 0 1440 260" preserveAspectRatio="none">
          <defs>
            <linearGradient id="waveFade" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#3D352E" stop-opacity="0.2"/>
              <stop offset="30%" stop-color="#3D352E" stop-opacity="0.5"/>
              <stop offset="60%" stop-color="#3D352E" stop-opacity="0.8"/>
              <stop offset="100%" stop-color="#3D352E" stop-opacity="1"/>
            </linearGradient>
          </defs>
          <path d="M0,260 L0,180 C150,140 350,160 550,110 C750,60 950,90 1150,50 C1300,20 1400,40 1440,20 L1440,260 Z" fill="url(#waveFade)"/>
        </svg>
      </div>

      <!-- Corner decorations -->
      <div class="hero__decor--corner hero__decor--corner-tl"></div>
      <div class="hero__decor--corner hero__decor--corner-br"></div>

      <!-- Content -->
      <div class="hero__container">
        <span class="hero__badge">Dai mercatini di Parigi</span>
        <h1 class="hero__title">
          Ogni pezzo<br>
          <em>racconta una storia</em>
        </h1>
        <p class="hero__subtitle">
          Abbigliamento vintage premium selezionato con cura.
          Pezzi unici che hanno attraversato decenni con eleganza immutata.
        </p>
        <div class="hero__cta-wrapper">
          <a href="/shop.html" class="hero__cta">
            Esplora la Collezione
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </a>
          <a href="/chi-siamo.html" class="hero__cta-secondary">Scopri la nostra storia</a>
        </div>
      </div>

      <!-- Floating product cards - Dynamic -->
      <div class="hero__floating" id="hero-floating-cards">
        <!-- Loaded dynamically from API -->
      </div>

      <!-- Scroll indicator -->
      <div class="hero__scroll">Scopri</div>
    </section>

    <!-- NUOVI ARRIVI -->
    <section class="section">
      <div class="container">
        <h2 class="title-decorated" style="font-size: var(--text-3xl); margin-bottom: var(--space-10);">Nuovi Arrivi</h2>

        <div class="product-grid" id="nuovi-arrivi-grid">
          <!-- Products loaded dynamically from API -->
          <div class="loading-state" style="grid-column: 1/-1; text-align: center; padding: 3rem;">
            <p style="color: var(--color-ink-faded);">Caricamento...</p>
          </div>
        </div>

        <div style="text-align: center; margin-top: var(--space-10);">
          <a href="/shop.html" class="btn btn-secondary btn-lg">Vedi Tutta la Collezione</a>
        </div>
      </div>
    </section>

    <!-- LA NOSTRA STORIA -->
    <section class="section bg-parchment">
      <div class="container">
        <div class="story-section">
          <div class="story-image animate-on-scroll">
            <img src="https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?w=600&h=700&fit=crop" alt="Mercatino vintage parigino" loading="lazy">
          </div>
          <div class="animate-on-scroll">
            <p class="small-caps" style="margin-bottom: var(--space-4);">La Nostra Storia</p>
            <h2 style="margin-bottom: var(--space-6);">Dai mercatini di Parigi<br>al tuo armadio</h2>
            <p style="font-size: var(--text-lg); color: var(--color-ink-light); margin-bottom: var(--space-6); line-height: var(--leading-relaxed);">
              Ogni domenica mattina, mentre Parigi si sveglia lentamente, noi siamo gia' tra le bancarelle
              di Porte de Clignancourt. Cerchiamo pezzi che abbiano un'anima, capi che raccontino
              una storia attraverso le loro cuciture, i loro tessuti, le loro imperfezioni perfette.
            </p>
            <blockquote class="quote" style="margin-bottom: var(--space-8);">
              La moda passa, lo stile resta.
            </blockquote>
            <a href="/chi-siamo.html" class="btn btn-secondary">Scopri di Piu</a>
          </div>
        </div>
      </div>
    </section>

    <!-- CATEGORIE -->
    <section class="section">
      <div class="container">
        <h2 class="title-decorated" style="font-size: var(--text-3xl); margin-bottom: var(--space-10);">Esplora per Categoria</h2>

        <div class="categories-grid" id="categories-grid">
          <a href="/shop.html?categoria=giacche" class="category-card animate-on-scroll">
            <img src="https://images.unsplash.com/photo-1551488831-00ddcb6c6bd3?w=500&h=625&fit=crop" alt="Giacche" class="category-card__image" loading="lazy">
            <div class="category-card__overlay">
              <div>
                <h3 class="category-card__title">Giacche</h3>
                <p class="category-card__count" id="count-giacche">0 pezzi</p>
              </div>
            </div>
          </a>

          <a href="/shop.html?categoria=vestiti" class="category-card animate-on-scroll">
            <img src="https://images.unsplash.com/photo-1594938298603-c8148c4dae35?w=500&h=625&fit=crop" alt="Vestiti" class="category-card__image" loading="lazy">
            <div class="category-card__overlay">
              <div>
                <h3 class="category-card__title">Vestiti</h3>
                <p class="category-card__count" id="count-vestiti">0 pezzi</p>
              </div>
            </div>
          </a>

          <a href="/shop.html?categoria=accessori" class="category-card animate-on-scroll">
            <img src="https://images.unsplash.com/photo-1558171813-4c088753af8f?w=500&h=625&fit=crop" alt="Accessori" class="category-card__image" loading="lazy">
            <div class="category-card__overlay">
              <div>
                <h3 class="category-card__title">Accessori</h3>
                <p class="category-card__count" id="count-accessori">0 pezzi</p>
              </div>
            </div>
          </a>
        </div>
      </div>
    </section>

    <!-- NEWSLETTER -->
    <section class="section">
      <div class="container container-md">
        <div class="newsletter-section animate-on-scroll">
          <p class="small-caps" style="margin-bottom: var(--space-4);">Resta Aggiornato</p>
          <h2 style="margin-bottom: var(--space-4);">Nuovi arrivi ogni settimana</h2>
          <p style="color: var(--color-ink-light); margin-bottom: var(--space-8); max-width: 400px; margin-left: auto; margin-right: auto;">
            Iscriviti per ricevere in anteprima i nuovi pezzi e offerte esclusive riservate agli iscritti.
          </p>
          <form class="newsletter-form" style="margin: 0 auto;">
            <input type="email" class="form-input" placeholder="La tua email..." required>
            <button type="submit" class="btn btn-gold">Iscriviti</button>
          </form>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <div class="footer__grid">
        <div class="footer__brand">
          <p class="footer__logo">Cose Vintage</p>
          <p class="footer__tagline">"Ogni pezzo ha una storia"</p>
          <p style="font-size: var(--text-sm); color: var(--color-ink-light);">
            Abbigliamento vintage premium selezionato con cura dai migliori mercatini europei.
          </p>
        </div>

        <div>
          <h4 class="footer__heading">Shop</h4>
          <ul class="footer__links">
            <li><a href="/shop.html">Tutti i Prodotti</a></li>
            <li><a href="/shop.html?filter=nuovi">Nuovi Arrivi</a></li>
            <li><a href="/shop.html?categoria=giacche">Giacche</a></li>
            <li><a href="/shop.html?categoria=vestiti">Vestiti</a></li>
            <li><a href="/shop.html?categoria=accessori">Accessori</a></li>
          </ul>
        </div>

        <div>
          <h4 class="footer__heading">Info</h4>
          <ul class="footer__links">
            <li><a href="/chi-siamo.html">Chi Siamo</a></li>
            <li><a href="/contatti.html">Contatti</a></li>
            <li><a href="/spedizioni.html">Spedizioni</a></li>
            <li><a href="/resi.html">Resi e Rimborsi</a></li>
          </ul>
        </div>

        <div>
          <h4 class="footer__heading">Legale</h4>
          <ul class="footer__links">
            <li><a href="/privacy.html">Privacy Policy</a></li>
            <li><a href="/cookie.html">Cookie Policy</a></li>
            <li><a href="/termini.html">Termini e Condizioni</a></li>
          </ul>
        </div>
      </div>

      <div class="footer__bottom">
        <p class="footer__copy">&copy; 2026 Cose Vintage. Tutti i diritti riservati.</p>
        <div class="footer__social">
          <a href="https://instagram.com/cosevintage" target="_blank" rel="noopener" aria-label="Instagram">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
            </svg>
          </a>
          <a href="https://pinterest.com/cosevintage" target="_blank" rel="noopener" aria-label="Pinterest">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 0c-6.627 0-12 5.372-12 12 0 5.084 3.163 9.426 7.627 11.174-.105-.949-.2-2.405.042-3.441.218-.937 1.407-5.965 1.407-5.965s-.359-.719-.359-1.782c0-1.668.967-2.914 2.171-2.914 1.023 0 1.518.769 1.518 1.69 0 1.029-.655 2.568-.994 3.995-.283 1.194.599 2.169 1.777 2.169 2.133 0 3.772-2.249 3.772-5.495 0-2.873-2.064-4.882-5.012-4.882-3.414 0-5.418 2.561-5.418 5.207 0 1.031.397 2.138.893 2.738.098.119.112.224.083.345l-.333 1.36c-.053.22-.174.267-.402.161-1.499-.698-2.436-2.889-2.436-4.649 0-3.785 2.75-7.262 7.929-7.262 4.163 0 7.398 2.967 7.398 6.931 0 4.136-2.607 7.464-6.227 7.464-1.216 0-2.359-.631-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146 1.124.347 2.317.535 3.554.535 6.627 0 12-5.373 12-12 0-6.628-5.373-12-12-12z"/>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Snipcart -->
  <script src="snipcart-loader.js"></script>

  <!-- Main JS -->
  <script src="script.js"></script>

  <!-- Homepage Dynamic Products -->
  <script>
    // v1.0.0 - 2026-01-14 - Dynamic products for homepage
    const API_BASE = 'https://cose-vintage-admin.emi-martucci.workers.dev';

    function formatPrice(price) {
      return new Intl.NumberFormat('it-IT', { style: 'currency', currency: 'EUR' }).format(price);
    }

    function getImageUrl(url) {
      if (!url) return 'https://placehold.co/400x500/F7F3EB/8B9A7A?text=No+Image';
      if (url.startsWith('http')) return url;
      return `${API_BASE}${url}`;
    }

    function capitalize(str) {
      return str ? str.charAt(0).toUpperCase() + str.slice(1) : '';
    }

    function getConditionClass(condizione) {
      return condizione === 'eccellente' ? 'good' : condizione === 'buona' ? 'fair' : 'fair';
    }

    // Render hero floating cards (3 products)
    function renderHeroCards(products) {
      const container = document.getElementById('hero-floating-cards');
      if (!container) return;

      const cards = products.slice(0, 3).map(p => `
        <div class="hero__float-card">
          <img src="${getImageUrl(p.image)}" alt="${p.nome}" loading="lazy">
          <p class="hero__float-card-title">${p.nome.split(' ').slice(0, 2).join(' ')}</p>
          <p class="hero__float-card-meta">${p.epoca ? `Anni '${p.epoca}` : ''}</p>
          <p class="hero__float-card-price">${Math.round(p.prezzo)}</p>
        </div>
      `).join('');

      container.innerHTML = cards;
    }

    // Render Nuovi Arrivi (4 products)
    function renderNuoviArrivi(products) {
      const container = document.getElementById('nuovi-arrivi-grid');
      if (!container) return;

      const cards = products.slice(0, 4).map(p => `
        <article class="product-card animate-on-scroll">
          <div class="product-card__image-wrapper">
            <img src="${getImageUrl(p.image)}" alt="${p.nome}" class="product-card__image" loading="lazy">
            <span class="product-card__badge badge badge-new">Nuovo</span>
            <button class="product-card__wishlist" aria-label="Aggiungi ai preferiti">
              <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
              </svg>
            </button>
            <div class="product-card__overlay">
              <div class="product-card__actions">
                <a href="/product.html?id=${p.id}" class="btn btn-primary btn-sm">Scopri</a>
              </div>
            </div>
          </div>
          <div class="product-card__info">
            <span class="product-card__category">${capitalize(p.categoria)}</span>
            <h3 class="product-card__title"><a href="/product.html?id=${p.id}">${p.nome}</a></h3>
            <p class="product-card__era">${p.epoca ? `Anni '${p.epoca}` : ''}${p.taglia ? ` Â· Taglia ${p.taglia.toUpperCase()}` : ''}</p>
            <div class="product-card__price">
              <span class="product-card__price-current">${formatPrice(p.prezzo)}</span>
            </div>
            <div class="product-card__condition">
              <span class="product-card__condition-dot product-card__condition-dot--${getConditionClass(p.condizione)}"></span>
              <span>${p.condizione === 'eccellente' ? 'Condizioni eccellenti' : p.condizione === 'buona' ? 'Buone condizioni' : 'Usato'}</span>
            </div>
          </div>
        </article>
      `).join('');

      container.innerHTML = cards;
    }

    // Update category counts
    function updateCategoryCounts(products) {
      const counts = {};
      products.forEach(p => {
        if (p.categoria) {
          counts[p.categoria] = (counts[p.categoria] || 0) + 1;
        }
      });

      // Update each category count
      ['giacche', 'vestiti', 'accessori', 'camicie', 'gonne', 'maglieria'].forEach(cat => {
        const el = document.getElementById(`count-${cat}`);
        if (el) {
          const count = counts[cat] || 0;
          el.textContent = `${count} ${count === 1 ? 'pezzo' : 'pezzi'}`;
        }
      });
    }

    // Load products from API
    async function loadHomeProducts() {
      try {
        const response = await fetch(`${API_BASE}/api/products?disponibile=1`);
        if (!response.ok) throw new Error('Failed to load');

        const data = await response.json();
        const products = data.products || [];

        // Sort by newest first
        products.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));

        // Render all sections
        renderHeroCards(products);
        renderNuoviArrivi(products);
        updateCategoryCounts(products);

      } catch (error) {
        console.error('Error loading products:', error);
        // Fallback: hide loading state
        const grid = document.getElementById('nuovi-arrivi-grid');
        if (grid) grid.innerHTML = '<p style="grid-column:1/-1;text-align:center;color:var(--color-ink-faded);">Prodotti non disponibili</p>';
      }
    }

    // Init
    document.addEventListener('DOMContentLoaded', loadHomeProducts);
  </script>
</body>
</html>
